# ================================================================
# IRAC PROJECT - PRODUCTION ENVIRONMENT CONFIGURATION TEMPLATE
# ================================================================
#
# This template contains all environment variables required for
# production deployment of the IRAC platform.
#
# SETUP INSTRUCTIONS:
# 1. Copy this file to .env.production
# 2. Replace all placeholder values with your actual configuration
# 3. Ensure proper file permissions (chmod 600 .env.production)
# 4. Never commit actual .env files to version control
#
# Last Updated: December 2024
# Version: 1.0 Production Ready
# ================================================================

# ================================================================
# CORE APPLICATION CONFIGURATION
# ================================================================

# Environment and Server Configuration
NODE_ENV=production
APP_ENV=production
DEBUG=false
VERBOSE_LOGGING=false

# Server Ports and Network Configuration
BACKEND_PORT=1405
FRONTEND_PORT=3000
HOST=0.0.0.0
SERVER_URL=https://api.yourdomain.com
FRONTEND_URL=https://yourdomain.com

# CORS Configuration
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_CREDENTIALS=true

# ================================================================
# DATABASE CONFIGURATION
# ================================================================

# MongoDB Configuration
MONGODB_URI=mongodb://localhost:27017/irac_production
MONGODB_DATABASE=irac_production
MONGODB_OPTIONS=?retryWrites=true&w=majority

# Database Connection Pool
MONGODB_MAX_POOL_SIZE=100
MONGODB_MIN_POOL_SIZE=5
MONGODB_MAX_IDLE_TIME_MS=300000

# Database Backup Configuration
DB_BACKUP_ENABLED=true
DB_BACKUP_SCHEDULE="0 2 * * *"
DB_BACKUP_RETENTION_DAYS=30

# ================================================================
# AUTHENTICATION & SECURITY
# ================================================================

# JWT Configuration
JWT_SECRET=your_super_secure_jwt_secret_key_minimum_32_characters_long
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d
JWT_ALGORITHM=HS256

# Session Configuration
SESSION_SECRET=your_session_secret_key_minimum_32_characters_long
SESSION_MAX_AGE=86400000
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

# Password Security
BCRYPT_SALT_ROUNDS=12
PASSWORD_MIN_LENGTH=8
PASSWORD_RESET_TOKEN_EXPIRES=3600000

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESS=false

# Security Headers
HELMET_ENABLED=true
HSTS_MAX_AGE=31536000
CONTENT_SECURITY_POLICY=default-src 'self'; script-src 'self' 'unsafe-eval'; style-src 'self' 'unsafe-inline'

# ================================================================
# SSL/TLS CONFIGURATION
# ================================================================

# SSL Certificate Configuration
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/yourdomain.com.crt
SSL_KEY_PATH=/etc/ssl/private/yourdomain.com.key
SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt
FORCE_HTTPS=true

# ================================================================
# EXTERNAL SERVICES - SMS PROVIDER
# ================================================================

# SMS Provider Configuration (Choose one)
SMS_PROVIDER=kavenegar
SMS_ENABLED=true
SMS_TIMEOUT=30000
SMS_MAX_RETRIES=3

# Kavenegar (Iranian SMS Provider)
KAVENEGAR_API_KEY=your_kavenegar_api_key_here
KAVENEGAR_SENDER=your_sender_number
KAVENEGAR_BASE_URL=https://api.kavenegar.com/v1

# Alternative: SMS.ir
# SMSIR_API_KEY=your_smsir_api_key_here
# SMSIR_SECRET_KEY=your_smsir_secret_key_here
# SMSIR_LINE_NUMBER=your_line_number

# Alternative: Twilio (International)
# TWILIO_ACCOUNT_SID=your_twilio_account_sid
# TWILIO_AUTH_TOKEN=your_twilio_auth_token
# TWILIO_PHONE_NUMBER=+1234567890

# OTP Configuration
OTP_EXPIRY_MINUTES=5
OTP_MAX_ATTEMPTS=3
OTP_COOLDOWN_MINUTES=15

# ================================================================
# EXTERNAL SERVICES - PAYMENT GATEWAY
# ================================================================

# Payment Gateway Configuration
PAYMENT_GATEWAY=zarinpal
PAYMENT_ENABLED=true
PAYMENT_TIMEOUT=600000
PAYMENT_WEBHOOK_SECRET=your_webhook_secret_key

# ZarinPal (Iranian Payment Gateway)
ZARINPAL_MERCHANT_ID=your_zarinpal_merchant_id_here
ZARINPAL_MODE=production
ZARINPAL_CALLBACK_URL=https://yourdomain.com/payment/callback
ZARINPAL_GATEWAY_URL=https://api.zarinpal.com/pg/v4/payment/request.json
ZARINPAL_VERIFY_URL=https://api.zarinpal.com/pg/v4/payment/verify.json

# Alternative: Stripe (International)
# STRIPE_PUBLIC_KEY=pk_live_your_stripe_public_key
# STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
# STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret
# STRIPE_API_VERSION=2023-10-16

# Currency Configuration
DEFAULT_CURRENCY=IRR
CURRENCY_SYMBOL=ریال
DECIMAL_PLACES=0

# Payment Limits
MIN_PAYMENT_AMOUNT=10000
MAX_PAYMENT_AMOUNT=50000000
REFUND_ENABLED=true
PARTIAL_REFUND_ENABLED=true

# ================================================================
# EXTERNAL SERVICES - EMAIL/SMTP
# ================================================================

# Email Configuration
EMAIL_ENABLED=true
EMAIL_TIMEOUT=30000
EMAIL_MAX_RETRIES=3

# SMTP Configuration (Mailgun example)
SMTP_HOST=smtp.mailgun.org
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=postmaster@mg.yourdomain.com
SMTP_PASSWORD=your_mailgun_smtp_password

# Email Addresses
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=IRAC Platform
EMAIL_REPLY_TO=support@yourdomain.com
EMAIL_ADMIN=admin@yourdomain.com

# Alternative: AWS SES
# SMTP_HOST=email-smtp.us-east-1.amazonaws.com
# SMTP_PORT=587
# SMTP_USER=your_aws_access_key_id
# SMTP_PASSWORD=your_aws_ses_smtp_password

# Email Templates
EMAIL_TEMPLATE_DIR=/templates/email
EMAIL_LOGO_URL=https://yourdomain.com/logo.png
EMAIL_COMPANY_ADDRESS=Your Company Address Here

# ================================================================
# EXTERNAL SERVICES - FILE STORAGE
# ================================================================

# File Storage Configuration
FILE_STORAGE=s3
FILE_UPLOAD_ENABLED=true
MAX_FILE_SIZE=50MB
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,mp4,mp3

# AWS S3 Configuration
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
AWS_REGION=us-east-1
S3_BUCKET_NAME=irac-production-files
S3_PUBLIC_URL=https://your-bucket.s3.amazonaws.com
S3_PRESIGNED_URL_EXPIRES=3600

# Alternative: Arvan Cloud (Iranian Cloud Storage)
# ARVAN_ACCESS_KEY=your_arvan_access_key
# ARVAN_SECRET_KEY=your_arvan_secret_key
# ARVAN_ENDPOINT=https://s3.ir-thr-at1.arvanstorage.com
# ARVAN_BUCKET=irac-files
# ARVAN_REGION=ir-thr-at1

# File Processing
IMAGE_OPTIMIZATION_ENABLED=true
VIDEO_COMPRESSION_ENABLED=true
VIRUS_SCANNING_ENABLED=true
THUMBNAIL_GENERATION_ENABLED=true

# CDN Configuration
CDN_ENABLED=true
CDN_URL=https://cdn.yourdomain.com
CDN_CACHE_MAX_AGE=31536000

# ================================================================
# MONITORING & ANALYTICS
# ================================================================

# Error Monitoring (Sentry)
SENTRY_ENABLED=true
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Performance Monitoring (New Relic)
NEW_RELIC_ENABLED=false
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key
NEW_RELIC_APP_NAME=IRAC-Production
NEW_RELIC_LOG_LEVEL=info

# Analytics (Google Analytics)
GOOGLE_ANALYTICS_ENABLED=true
GA_TRACKING_ID=G-XXXXXXXXXX
GTM_ID=GTM-XXXXXXX

# Application Performance Monitoring
APM_ENABLED=true
METRICS_COLLECTION_INTERVAL=60000
PERFORMANCE_BUDGET_CPU=80
PERFORMANCE_BUDGET_MEMORY=512

# ================================================================
# LOGGING CONFIGURATION
# ================================================================

# Log Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=10
LOG_DATE_PATTERN=YYYY-MM-DD

# Log Destinations
LOG_TO_FILE=true
LOG_TO_CONSOLE=false
LOG_FILE_PATH=/var/log/irac/app.log
ERROR_LOG_PATH=/var/log/irac/error.log
ACCESS_LOG_PATH=/var/log/irac/access.log

# Audit Logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_EVENTS=auth,payment,admin,user_data
AUDIT_LOG_RETENTION_DAYS=90

# ================================================================
# CACHE CONFIGURATION
# ================================================================

# Redis Cache Configuration
CACHE_ENABLED=true
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0
REDIS_TTL=3600

# Session Store
SESSION_STORE=redis
SESSION_REDIS_URL=redis://localhost:6379/1

# API Response Caching
API_CACHE_ENABLED=true
API_CACHE_TTL=300
STATIC_CACHE_TTL=86400

# ================================================================
# BUSINESS CONFIGURATION
# ================================================================

# Application Features
REGISTRATION_ENABLED=true
EMAIL_VERIFICATION_REQUIRED=true
PHONE_VERIFICATION_REQUIRED=true
ADMIN_APPROVAL_REQUIRED=false

# E-commerce Configuration
ECOMMERCE_ENABLED=true
INVENTORY_TRACKING=true
TAX_CALCULATION_ENABLED=true
DISCOUNT_CODES_ENABLED=true

# Course Management
COURSES_ENABLED=true
COURSE_ENROLLMENT_LIMIT=1000
COURSE_PROGRESS_TRACKING=true
CERTIFICATES_ENABLED=true

# Wallet & Scoring System
WALLET_ENABLED=true
SCORING_ENABLED=true
REFERRAL_SYSTEM_ENABLED=true
LOYALTY_PROGRAM_ENABLED=true

# Content Management
MEDIA_UPLOAD_ENABLED=true
ARTICLE_COMMENTS_ENABLED=true
CONTENT_MODERATION_ENABLED=true

# ================================================================
# API CONFIGURATION
# ================================================================

# API Settings
API_VERSION=v1
API_BASE_URL=https://api.yourdomain.com
API_RATE_LIMIT=1000
API_KEY_REQUIRED=false

# External API Integrations
WEATHER_API_KEY=your_weather_api_key
MAPS_API_KEY=your_google_maps_api_key
SOCIAL_LOGIN_ENABLED=false

# Webhook Configuration
WEBHOOKS_ENABLED=true
WEBHOOK_SECRET=your_webhook_secret_key
WEBHOOK_TIMEOUT=30000

# ================================================================
# PERFORMANCE & SCALING
# ================================================================

# Performance Configuration
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6
STATIC_FILES_MAX_AGE=31536000

# Worker Processes
WORKER_PROCESSES=auto
WORKER_CONNECTIONS=1024
KEEPALIVE_TIMEOUT=65

# Memory Management
MAX_MEMORY_USAGE=1GB
MEMORY_CHECK_INTERVAL=60000
GARBAGE_COLLECTION_AGGRESSIVE=false

# ================================================================
# BACKUP & MAINTENANCE
# ================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/backups/irac
BACKUP_ENCRYPTION_ENABLED=true
BACKUP_ENCRYPTION_KEY=your_backup_encryption_key

# Maintenance Mode
MAINTENANCE_MODE_ENABLED=false
MAINTENANCE_MESSAGE="System is under maintenance. Please try again later."
MAINTENANCE_BYPASS_IPS=127.0.0.1,your.office.ip.address

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_INTERVAL=30000

# ================================================================
# DEVELOPMENT & DEBUGGING (Production: All False)
# ================================================================

# Debug Configuration (Should be false in production)
DEBUG_MODE=false
VERBOSE_ERRORS=false
STACK_TRACE_ENABLED=false
PROFILING_ENABLED=false

# Development Tools (Should be disabled in production)
DEV_TOOLS_ENABLED=false
HOT_RELOAD_ENABLED=false
SOURCE_MAPS_ENABLED=false

# ================================================================
# COMPLIANCE & LEGAL
# ================================================================

# GDPR Compliance
GDPR_COMPLIANCE_ENABLED=true
DATA_RETENTION_PERIOD=2555
COOKIE_CONSENT_REQUIRED=true
PRIVACY_POLICY_URL=https://yourdomain.com/privacy
TERMS_OF_SERVICE_URL=https://yourdomain.com/terms

# Data Protection
DATA_ENCRYPTION_ENABLED=true
PII_MASKING_ENABLED=true
AUDIT_TRAIL_ENABLED=true

# ================================================================
# CUSTOM BUSINESS LOGIC
# ================================================================

# IRAC Specific Configuration
ARCHITECTURE_COURSES_FEATURED=5
WORKSHOP_BOOKING_ADVANCE_DAYS=30
USER_PROFILE_COMPLETION_BONUS=100
REFERRAL_COMMISSION_PERCENTAGE=10
DAILY_LOGIN_POINTS=10
COURSE_COMPLETION_POINTS=500

# Notification Settings
PUSH_NOTIFICATIONS_ENABLED=true
EMAIL_NOTIFICATIONS_ENABLED=true
SMS_NOTIFICATIONS_ENABLED=true

# Content Moderation
AUTO_MODERATION_ENABLED=true
PROFANITY_FILTER_ENABLED=true
SPAM_DETECTION_ENABLED=true

# ================================================================
# END OF CONFIGURATION
# ================================================================
#
# IMPORTANT SECURITY NOTES:
# - Never commit this file with actual values to version control
# - Ensure file permissions are set to 600 (owner read/write only)
# - Regularly rotate secrets and API keys
# - Use strong, unique passwords for all services
# - Enable 2FA on all external service accounts
# - Regularly audit access logs and monitor for suspicious activity
#
# PRODUCTION DEPLOYMENT CHECKLIST:
# □ All placeholder values replaced with actual configuration
# □ External service accounts created and configured
# □ SSL certificates installed and configured
# □ Monitoring and alerting systems configured
# □ Backup systems tested and verified
# □ Security audit completed
# □ Performance testing completed
# □ Disaster recovery plan documented
#
# For support and documentation:
# - Technical Documentation: /docs/
# - API Documentation: https://api.yourdomain.com/docs
# - Support Email: support@yourdomain.com
# - Emergency Contact: emergency@yourdomain.com
#
# ================================================================
